substitutions:
  name: "homedisplay"
  disp_name: Home Display
  update_time: 60s

  dvc_media_player_tv: media_player.samsung_un60es6100_2
  dvc_media_player_audio: media_player.str_dn2010
  dvc_media_player_androidtv: media_player.bedroomshieldtv_2

globals: ##to set default reboot behavior
  - id: wifi_connection
    type: bool
    restore_value: no
    initial_value: "false"

#external_components:
#  - source: github://pr#12091
#    components: [lvgl]
#    refresh: 1h

esphome:
  name: ${name}
  friendly_name: ${disp_name}
  on_boot:
  - delay: 5s
  - lvgl.widget.hide: boot_screen
  platformio_options:
    build_flags: "-DBOARD_HAS_PSRAM"
    board_build.arduino.memory_type: qio_opi
    board_build.flash_mode: dio
    board_upload.maximum_ram_size: 524288

psram:
  mode: octal
  speed: 80MHz

esp32:
  board: esp32s3box
  flash_size: 16MB
  cpu_frequency: 240MHz
  framework:
    type: esp-idf
    sdkconfig_options:
      CONFIG_ESP32S3_DEFAULT_CPU_FREQ_240: "y"
      CONFIG_ESP32S3_DATA_CACHE_64KB: "y"
      CONFIG_ESP32S3_DATA_CACHE_LINE_64B: "y"

time:
  - platform: homeassistant
    id: esptime
    on_time:
      # Update Time Widget
      - minutes: "*"
        then:
          - lvgl.label.update:
              id: homeassistant_time_text
              text:
                time_format: "%A %I:%M:%S %p"
                time: !lambda return id(esptime).now();
          # Force a redraw to ensure the screen updates
          - lvgl.widget.redraw: homeassistant_time_text
      # Turn on screen antiburn
      - hours: 2,3,4,5
        minutes: 5
        seconds: 0
        then:
          - switch.turn_on: switch_antiburn
      # Turn off screen antiburn
      - hours: 2,3,4,5
        minutes: 35
        seconds: 0
        then:
          - switch.turn_off: switch_antiburn

# Enable logging
logger:
  hardware_uart: USB_SERIAL_JTAG

# Enable Home Assistant API
api:
  encryption:
    key: !secret api_key

ota:
  - platform: esphome
    password: !secret ota_password

wifi:
    ssid: !secret wifi_ssid
    password: !secret wifi_password

    ap:
      ssid: ${name} Fallback
      password: !secret fallback_password

captive_portal:

web_server:
  port: 80

i2c:
   - id: bus_a
     sda: 8
     scl: 9
     scan: true

output:
  - platform: gpio
    pin:
      ch422g: ch422g_hub
      number: 2
      mode:
        output: true
      inverted: false
    id: backlight_output

light:
  - platform: binary
    id: lcdbacklight
    name: Screen
    icon: "mdi:television"
    entity_category: config
    output: backlight_output
    restore_mode: RESTORE_DEFAULT_ON
    #default_transition_length: 250ms

button:
- platform: restart
  name: ${disp_name} Restart

- platform: safe_mode
  name: ${disp_name} Restart (Safe Mode)

switch:
  - platform: template
    name: Antiburn
    id: switch_antiburn
    icon: mdi:television-shimmer
    optimistic: true
    entity_category: "config"
    turn_on_action:
      - logger.log: "Starting Antiburn"
      - if:
          condition: lvgl.is_paused
          then:
            - lvgl.resume:
            - lvgl.widget.redraw:
      - lvgl.pause:
          show_snow: true
    turn_off_action:
      - logger.log: "Stopping Antiburn"
      - if:
          condition: lvgl.is_paused
          then:
            - lvgl.resume:
            - lvgl.widget.redraw:

number:
  - platform: template
    name: Screen timeout
    optimistic: true
    id: display_timeout
    unit_of_measurement: "s"
    initial_value: 3600
    restore_value: true
    min_value: 10
    max_value: 3600
    step: 5
    mode: box

sensor:
- platform: wifi_signal
  name: ${disp_name} WiFi Signal
  update_interval: ${update_time}

- platform: homeassistant
  name: "Outdoor Temperature"
  id: outdoor_temp
  entity_id: sensor.openweathermap_temperature
  attribute: temperature
  on_value:
    - lvgl.label.update:
        id: outdoor_temperature_text
        text:
          format: "%.0f °C"
          args: [ 'x' ]

- platform: homeassistant
  name: "Outdoor Humidity"
  id: outdoor_humidity
  entity_id: sensor.openweathermap_humidity
  attribute: humidity
  #on_value:
  #  - lvgl.label.update:
  #      id: outdoor_humidity_text
  #      text:
  #        format: "\U000F058E %.0f%%"
  #        args: [ 'x' ]

- platform: homeassistant
  name: "Temperature"
  id: temp
  entity_id: sensor.air_quality_monitor_temperature
  on_value:
    - lvgl.label.update:
        id: indoor_temperature_text
        text:
          format: "%.1f °C"
          args: [ 'x' ]

- platform: homeassistant
  name: "Humidity"
  id: humidity
  entity_id: sensor.air_quality_monitor_humidity
  on_value:
    - lvgl.label.update:
        id: indoor_humidity_text
        text:
          format: "%.1f%%"
          args: [ 'x' ]

- platform: homeassistant
  name: "PM 2.5"
  id: pm2_5
  entity_id: sensor.air_quality_monitor_pm2_5
  on_value:
    - lvgl.label.update:
        id: indoor_pm25_text
        text:
          format: "\U000F013B %.0f µg/m³"
          args: [ 'x' ]

- platform: homeassistant
  name: "Pressure"
  id: pressure
  entity_id: sensor.openweathermap_pressure
  on_value:
    - lvgl.label.update:
        id: indoor_air_pressure_text
        text:
          format: "%.1f hPa"
          args: [ 'x' ]

- platform: homeassistant
  name: "eCO2"
  id: eco2
  entity_id: sensor.air_quality_monitor_bedroom_carbon_dioxide
  on_value:
    - lvgl.label.update:
        id: indoor_co2_text
        text:
          format: "%.0f ppm"
          args: [ 'x' ]

- platform: homeassistant
  name: "TVOC"
  id: tvoc
  entity_id: sensor.air_quality_monitor_voc_index
  on_value:
    - lvgl.label.update:
        id: indoor_tvoc_text
        text:
          format: "%.0f ppb"
          args: [ 'x' ]

#- platform: homeassistant
#  name: "PM 1.0"
#  id: pm1_0
#  entity_id: sensor.air_quality_monitor_pm2_5
#  on_value:
#    - lvgl.label.update:
#        id: indoor_pm1_text
#        text:
#          format: "\U000F013B %.0f µg/m³"
#          args: [ 'x' ]

- platform: homeassistant
  name: "VOC"
  id: voc_bedroom
  entity_id: sensor.air_quality_monitor_bedroom_volatile_organic_compounds
  on_value:
    - lvgl.label.update:
        id: indoor_voc_bedroom_text
        text:
          format: "\U000F013B %.0f µg/m³"
          args: [ 'x' ]

#- platform: homeassistant
#  name: "PM 10"
#  id: pm10
#  entity_id: sensor.air_quality_monitor_pm2_5
#  on_value:
#    - lvgl.label.update:
#        id: indoor_pm10_text
#        text:
#          format: "\U000F013B %.0f µg/m³"
#          args: [ 'x' ]

- platform: homeassistant
  name: "Formaldehyde"
  id: CH2O
  entity_id: sensor.air_quality_monitor_bedroom_formaldehyde_concentration
  on_value:
    - lvgl.label.update:
        id: indoor_ch2o_text
        text:
          format: "\U000F013B %.0f ppm"
          args: [ 'x' ]

- platform: homeassistant
  name: "Illuminance"
  id: TS0222lux
  entity_id: sensor.solar_light_sensor_illuminance
  on_value:
    - lvgl.label.update:
        id: indoor_illuminance_text
        text:
          format: "\U000F00DE %.1f lx"
          args: [ 'x' ]

- platform: homeassistant
  name: "Receiver Volume Level"
  id: reciever_volume_level
  entity_id: media_player.str_dn2010
  attribute: volume_level
  on_value:
    - lvgl.label.update:
        id: lbl_reciver_volume
        text:
          format: "%.2f"
          args: [ 'x' ]
    - lvgl.slider.update:
        id: sld_reciever_volume
        value: !lambda return (x * 100);

binary_sensor:
  - platform: homeassistant
    id: lights
    entity_id: light.led_dimmer_lounge_radiator
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_lounge_radiator
          state:
            checked: !lambda return x;

  - platform: homeassistant
    id: led_strip
    entity_id: light.switch_usb_led_pc
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_pc_led_strip
          state:
            checked: !lambda return x;

  - platform: homeassistant
    id: wb_led_strip
    entity_id: light.wled_workbench
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_office_workbench_led_strip
          state:
            checked: !lambda return x;

  - platform: homeassistant
    id: bedroom_receiver
    entity_id: media_player.str_dn2010
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_media_receiver
          state:
            checked: !lambda return x;

  - platform: homeassistant
    id: bedroom_tv
    entity_id: media_player.samsung_un60es6100_2
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_media_television
          state:
            checked: !lambda return x;

  - platform: homeassistant
    id: bedroom_sheildtv
    entity_id: media_player.bedroomshieldtv_2
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_media_androidtv
          state:
            checked: !lambda return x;

  - platform: homeassistant
    id: bedroom_receiver_muted
    entity_id: media_player.str_dn2010
    attribute: is_volume_muted
    trigger_on_initial_state: true
    on_state:
      then:
        lvgl.widget.update:
          id: btn_volume_mute
          state:
            checked: !lambda return x;

  - platform: homeassistant
    name: "Internet Connection"
    id: internet_con
    entity_id: binary_sensor.8_8_8_8
    trigger_on_initial_state: true
    on_state:
      then:
        - if:
            condition: 
              - binary_sensor.is_on: internet_con
            then:
              - lvgl.label.update:
                  id: internet_status
                  text: "\U000F0588" # WAN icon
                  text_color: my_green
            else: 
              - lvgl.label.update:
                  id: internet_status
                  text: "\U000F0588" # WAN icon
                  text_color: my_red

  - platform: homeassistant
    name: "Front Door"
    id: door
    entity_id: binary_sensor.door_sensor_front_door_opening
    trigger_on_initial_state: true
    on_state:
      then:
        - if:
            condition: 
              - binary_sensor.is_on: door
            then:
              - lvgl.label.update:
                  id: door_text
                  text: "\U000F05B1" # door-open
                  text_color: my_yellow
            else: 
              - lvgl.label.update:
                  id: door_text
                  text: "\U000F05AE" # door-closed
                  text_color: my_white

  - platform: homeassistant
    name: "Workday"
    id: workday
    entity_id: binary_sensor.workday_sensor    
    trigger_on_initial_state: true
    on_state:
      then:
        - if:
            condition: 
              - binary_sensor.is_on: workday
            then:
              - lvgl.label.update:
                  id: workday_text
                  text: "\U000F00D6" # briefcase
                  text_color: my_white
            else: 
              - lvgl.label.update:
                  id: workday_text
                  text: "\U000F1658" # briefcase-off
                  text_color: my_green

text_sensor:
  - platform: homeassistant
    name: "Sun"
    id: sun
    entity_id: sun.sun
    on_value:
      then:
        - if:
            condition:
              - text_sensor.state:
                  id: sun
                  state: "above_horizon"
            then:
            - lvgl.label.update:
                id: sun_text
                text: "\U000F0599" # weather-sunny
            else:
            - lvgl.label.update:
                id: sun_text
                text: "\U000F0594" # weather-night

  - platform: homeassistant
    name: "Weather"
    id: weather
    entity_id: sensor.openweathermap_condition
    on_value:
      then:
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "clear-night"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0594" # clear-night
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Clear Night" # clear-night
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "cloudy"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0590" # cloudy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Cloudy" # cloudy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "exceptional"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0F2F" # exceptional
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Exceptional" # exceptional
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "fog"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0591" # fog
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Fog" # fog
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "hail"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0592" # hail
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Hail" # hail
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "lightning"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0593" # lightning
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Lightning" # lightning
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "lightning-rainy"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F067E" # lightning-rainy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Lightning/Rainy" # lightning-rainy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "partlycloudy"
              - text_sensor.state:
                  id: sun
                  state: above_horizon
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0595" # day-partlycloudy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Partly Cloudy" # day-partlycloudy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "partlycloudy"
              - text_sensor.state:
                  id: sun
                  state: below_horizon
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0F31" # night-partlycloudy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Partly Cloudy" # night-partlycloudy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "pouring"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0596" # pouring
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Pouring" # pouring
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "rainy"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0597" # rainy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Rainy" # rainy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "snowy"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0598" # snowy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Snowy" # snowy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "snowy-rainy"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F067F" # snowy-rainy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Snowy/Rainy" # snowy-rainy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "sunny"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F0599" # sunny
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Sunny" # sunny
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "windy"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F059D" # windy
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Windy" # windy
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "windy-variant"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F059E" # windy-variant
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Windy/Cloudy" # windy-variant
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "unknown"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F14E4" # unknown
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Unknown" # unknown
        - if:
            condition:
              - text_sensor.state:
                  id: weather
                  state: "unavailable"
            then:
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_icon
                text: "\U000F14E4" # unavailable
            - lvgl.label.update:
                id: lbl_weather_forecast_condition_name
                text: "Unavailable" # unavailable

  - platform: homeassistant
    name: "Moon"
    id: moon
    entity_id: sensor.moon_phase
    on_value:
      then:
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "new_moon"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F64" # moon-new
                text_color: my_white
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "waxing_crescent"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F67" # moon-waxing-cresecent
                text_color: my_white
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "first_quarter"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F61" # moon-first-quarter
                text_color: my_white
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "waxing_gibbous"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F68" # moon-waxing-gibbous
                text_color: my_white
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "full_moon"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F62" # moon-full
                text_color: my_yellow
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "waning_gibbous"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F66" # moon-waning-gibbous
                text_color: my_white
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "last_quarter"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F63" # moon-last-quarter
                text_color: my_white
        - if:
            condition:
              - text_sensor.state:
                  id: moon
                  state: "waning_crescent"
            then:
            - lvgl.label.update:
                id: moon_text
                text: "\U000F0F65" # moon-waning-crescent
                text_color: my_white

  - platform: homeassistant
    name: "Receiver Input"
    id: receiver_input
    entity_id: media_player.str_dn2010
    attribute: media_title
    on_value:
      - lvgl.label.update:
          id: lbl_receiver_input
          text: !lambda return "\U000F093D " + x;

  - platform: homeassistant
    name: "AndroidTV App"
    id: androidtv_app
    entity_id: media_player.bedroomshieldtv_2
    attribute: app_name
    on_value:
      - lvgl.label.update:
          id: lbl_androidtv_app
          text: !lambda |-
           if (x == "com.plexapp.android") {
                return "\U000F0032 Plex";
                }
           if (x == "com.google.android.youtube.tv") {
                return "\U000F0032 Youtube";
                }
           if (x == "com.netflix.ninja") {
                return "\U000F0032 Netflix";
                }
           if (x == "com.amazon.amazonvideo.livingroom") {
                return "\U000F0032 Amazon Prime";
                }
           if (x == "com.valvesoftware.steamlink") {
                return "\U000F0032 Steamlink";
                }
           if (x == "com.retroarch.aarch64") {
                return "\U000F0032 RetroArch";
                }
           if (x == "com.alexvas.dvr.pro") {
                return "\U000F0032 TinyCam Pro";
                }
           if (x == "com.google.android.backdrop") {
                return "\U000F0032 Screensaver";
                }
           if (x == "com.google.android.tvlauncher") {
                return "\U000F0032 Home Screen";
                }
           if (x == "com.android.tv.settings") {
                return "\U000F0032 Settings";
                }
           if (x == "com.android.vending") {
                return "\U000F0032 Google Play Store";
                }
           if (x == "com.nvidia.ota") {
                return "\U000F0032 SheildTV Update";
                }
           else {
                return "\U000F0032" + x;
              }

display:
  - platform: rpi_dpi_rgb
    id: my_display
    update_interval: never
    auto_clear_enabled: false
    color_order: RGB
    pclk_frequency: 30MHZ
    dimensions:
      width: 1024
      height: 600
    de_pin:
      number: 5
    hsync_pin:
      number: 46
      ignore_strapping_warning: true
    vsync_pin:
      number: 3
      ignore_strapping_warning: true
    pclk_pin: 7
    pclk_inverted: true
#    reset_pin:
#      ch422g: ch422g_hub
#      number: 3
#    enable_pin:
#      ch422g: ch422g_hub
#      number: 2  
    hsync_back_porch: 152
    hsync_front_porch: 48
    hsync_pulse_width: 162
    vsync_back_porch: 13
    vsync_front_porch: 3
    vsync_pulse_width: 45
    data_pins:
      red:
        - 1         #r3
        - 2         #r4
        - 42        #r5
        - 41        #r6
        - 40        #r7
      blue:
        - 14        #b3
        - 38        #b4
        - 18        #b5
        - 17        #b6
        - 10        #b7
      green:
        - 39        #g2
        - 0         #g3
        - 45        #g4
        - 48        #g5
        - 47        #g6
        - 21        #g7

ch422g:
  - id: ch422g_hub

touchscreen:
  platform: gt911
  id: my_touch
  interrupt_pin: GPIO4
  reset_pin:
    ch422g: ch422g_hub
    number: 1
    mode: OUTPUT
  on_touch:
    - lambda: |-
        ESP_LOGI("Touch", "Touch detected at x=%d, y=%d", touch.x, touch.y);
  on_update:
    - lambda: |-
          for (auto touch: touches)  {
              if (touch.state <= 2) {
                ESP_LOGI("Touch points:", "id=%d x=%d, y=%d x.raw=%d, y.raw=%d", touch.id, touch.x, touch.y, touch.x_raw, touch.y_raw);
              }
          }  
  on_release:
    then:
      - if:
          condition: lvgl.is_paused
          then:
            - logger.log: "LVGL resuming"
            - lvgl.resume:
            - lvgl.widget.redraw:
            - light.turn_on: lcdbacklight

###########################
### Images
image:
  - file: "images/background.jpg"
  #- file: "images/HAL_9000_1024x600.jpg" 
  #- file: "images/NRGB03_800x480.jpg"
    id: background
    resize: 1024x800
    type: RGB565

  - file: https://www.esphome.io/favicon-512x512.png
    id: boot_logo
    resize: 200x200
    type: RGB565
    transparency: alpha_channel

  - file: "images/Retroarch_60x60.png"
    id: retroarch_icon
    resize: 50x50
    type: RGB565
    transparency: alpha_channel

  - file: "images/amazon_60x60.png"
    id: amazon_icon
    resize: 50x50
    type: RGB565
    transparency: alpha_channel

  - file: "images/mister_kun_bw_60x60.png"
    id: mister_icon
    resize: 50x50
    type: RGB565
    transparency: alpha_channel

### Colors
color:
  - id: my_red
    red: 100%
    green: 0%
    blue: 0%
  - id: my_orange
    red: 100%
    green: 50%
    blue: 0%
  - id: my_pink
    red: 100%
    green: 10%
    blue: 40%
  - id: my_yellow
    red: 100%
    green: 100%
    blue: 0%
  - id: my_green
    red: 0%
    green: 100%
    blue: 0%
  - id: my_blue
    red: 0%
    green: 0%
    blue: 100%
  - id: my_gray
    red: 50%
    green: 50%
    blue: 50%
  - id: my_white
    red: 100%
    green: 100%
    blue: 100%
  - id: my_black
    red: 0%
    green: 0%
    blue: 0%

### Fonts
font:
  #- file: "fonts/RobotoCondensed-Regular.ttf"
  - file: 'https://github.com/mousebird/wg-resources-new/raw/refs/heads/master/fonts/Roboto-Condensed-Regular.ttf'
    id: roboto_56
    size: 56
    bpp: 4
    glyphsets:
      - GF_Latin_Core
      - GF_Greek_Core
    extras:
      - file: 'https://github.com/Templarian/MaterialDesign-Webfont/raw/v7.4.47/fonts/materialdesignicons-webfont.ttf'
        glyphs: [
          "\U000F050F", # thermometer
          "\U000F10C3", # thermometer low
          "\U000F10C2", # thermometer high
          "\U000F192D", # grid import
          "\U000F02D1", # mdi-heart
          "\U000F05F1", # ev-station
          "\U000F140B", # lightning bolt
          "\U000F0425", # power
          "\U000F068A", # shield-home
          "\U000F02DC", # home
          "\U000F0EC5", # remote-tv
          "\U000F1A91", # cash-clock
          "\U000F0F55", # home-thermometer-outline
          "\U000F18D6", # sun-thermometer
          "\U000F1819", # bathtub-outline
          "\U000F1818", # bathtub
          "\U000F1A44", # heat-pump-outline
          "\U000F0335", # lightbulb
          "\U000F0336", # lightbulb_off
          "\U000F0769", # ceiling_light
          "\U000F06B5", # lamp   
          "\U000F08DD", # floor_lamp 
          "\U000F1747", # floor-lamp-torchiere
          "\U000F1051", # led-strip-variant
          "\U000F12BA", # string_lights  
          "\U000F0914", # track_light 
          "\U000F1A2F", # bulkhead_light 
          "\U000F07D6", # led_strip 
          "\U000F1020", # coach_lamp
          "\U000F1798", # ceiling_fan_light
          "\U000F0FA6", # car-seat-heater
          "\U000F0594", # weather-night
          "\U000F1054", # outdoor-lamp 
          "\U000F1A85", # water-thermometer
          "\U000F058E", # water-percent
          "\U000F029A", # gauge
          "\U000F07E4", # co2
          "\U000F0438", # radiator
          "\U000F013B", # chemical-weapon
          "\U000F0588", # wan
          "\U000F00DE", # brightness-5
          "\U000F05AE", # window-closed
          "\U000F05B1", # window-open
          "\U000F00D6", # briefcase
          "\U000F1658", # briefcase-off
          "\U000F141E", # dome-light
          "\U000F059F", # web
          "\U000F0A8E", # web-off
          "\U000F0599", # weather-sunny
          "\U000F0F67", # moon-waxing-cresecent
          ]

  #- file: "fonts/RobotoCondensed-Regular.ttf"
  - file: 'https://github.com/mousebird/wg-resources-new/raw/refs/heads/master/fonts/Roboto-Condensed-Regular.ttf'
    id: roboto_46
    size: 46
    bpp: 4
    glyphs: [
      µ,
      ]
    glyphsets:
      - GF_Latin_Core
      - GF_Greek_Core
    extras:
      #- file: "fonts/materialdesignicons-webfont.7.4.47.ttf"
      - file: 'https://github.com/Templarian/MaterialDesign-Webfont/raw/v7.4.47/fonts/materialdesignicons-webfont.ttf'
        glyphs: [
          "\U000F050F", # thermometer
          "\U000F10C3", # thermometer low
          "\U000F10C2", # thermometer high
          "\U000F192D", # grid import
          "\U000F02D1", # mdi-heart
          "\U000F05F1", # ev-station
          "\U000F140B", # lightning bolt
          "\U000F0425", # power
          "\U000F068A", # shield-home
          "\U000F02DC", # home
          "\U000F1A91", # cash-clock
          "\U000F0F55", # home-thermometer-outline
          "\U000F18D6", # sun-thermometer
          "\U000F1819", # bathtub-outline
          "\U000F1818", # bathtub
          "\U000F1A44", # heat-pump-outline
          "\U000F0335", # lightbulb
          "\U000F0E4F", # lightbulb-off
          "\U000F1253", # lightbulb-group
          "\U000F12CD", # lightbulb-group-off
          "\U000F0769", # ceiling_light
          "\U000F06B5", # lamp   
          "\U000F08DD", # floor_lamp   
          "\U000F1747", # floor-lamp-torchiere
          "\U000F1051", # led-strip-variant
          "\U000F12BA", # string_lights
          "\U000F0914", # track_light 
          "\U000F1A2F", # bulkhead_light 
          "\U000F07D6", # led_strip
          "\U000F1020", # coach_lamp
          "\U000F1798", # ceiling_fan_light
          "\U000F0FA6", # car-seat-heater
          "\U000F0594", # weather-night
          "\U000F1054", # outdoor-lamp 
          "\U000F1A85", # water-thermometer
          "\U000F058E", # water-percent
          "\U000F029A", # gauge
          "\U000F07E4", # co2
          "\U000F0438", # radiator
          "\U000F093D", # receiver-on
          "\U000F11B6", # receiver-off
          "\U000F075F", # volume-mute
          "\U000F0581", # volume-off
          "\U000F075D", # volume-up
          "\U000F075E", # volume-down
          "\U000F0502", # television
          "\U000F083B", # television-off
          "\U000F0EC5", # remote-tv
          "\U000F0379", # monitor
          "\U000F0D90", # monitor-off
          "\U000F0118", # cast
          "\U000F0032", # android
          "\U000F06BA", # plex
          "\U000F05C3", # youtube
          "\U000F0746", # netflix
          "\U000F05B9", # microsoft-xbox
          "\U000F04D3", # steam
          "\U000F0414", # sony-playstation
          "\U000F07E1", # nintendo-switch
          "\U000F072D", # nintendo-wiiu
          "\U000F05AB", # nintendo-wii
          "\U000F1393", # nintendo-game-boy
          "\U000F1398", # close-thick
          "\U000F0717", # snowflake
          "\U000F1A79", # sun-snowflake-variant
          "\U000F0238", # flame
          "\U000F1639", # minus-thick
          "\U000F11EC", # plus-thick
          "\U000F0EB5", # gamepad-square
          "\U000F0210", # fan
          "\U000F171D", # fan-auto
          "\U000F081D", # fan-off
          "\U000F0BC9", # space-invaders
          "\U000F07AE", # cctv
          ]

  #- file: "fonts/RobotoCondensed-Regular.ttf"
  - file: 'https://github.com/mousebird/wg-resources-new/raw/refs/heads/master/fonts/Roboto-Condensed-Regular.ttf'
    id: roboto_32
    size: 32
    bpp: 4
    glyphsets:
      - GF_Latin_Core
      - GF_Greek_Core
    extras:
      #- file: "fonts/materialdesignicons-webfont.7.4.47.ttf"
      - file: 'https://github.com/Templarian/MaterialDesign-Webfont/raw/v7.4.47/fonts/materialdesignicons-webfont.ttf'
        glyphs: [
          "\U000F050F", # thermometer
          ]

  #- file: "fonts/RobotoCondensed-Regular.ttf"
  - file: 'https://github.com/mousebird/wg-resources-new/raw/refs/heads/master/fonts/Roboto-Condensed-Regular.ttf'
    id: roboto_28
    size: 28
    bpp: 4
    glyphs: [
      µ,
      ³,
      ]
    glyphsets:
      - GF_Latin_Core
      - GF_Greek_Core
    extras:
      #- file: "fonts/materialdesignicons-webfont.7.4.47.ttf"
      - file: 'https://github.com/Templarian/MaterialDesign-Webfont/raw/v7.4.47/fonts/materialdesignicons-webfont.ttf'
        glyphs: [
          "\U000F050F", # thermometer
          "\U000F10C3", # thermometer low
          "\U000F10C2", # thermometer high
          "\U000F192D", # grid import
          "\U000F02D1", # mdi-heart
          "\U000F05F1", # ev-station
          "\U000F140B", # lightning bolt
          "\U000F0425", # power
          "\U000F068A", # shield-home
          "\U000F02DC", # home
          "\U000F1A91", # cash-clock
          "\U000F0F54", # home-thermometer
          "\U000F18D6", # sun-thermometer
          "\U000F1818", # bathtub
          "\U000F1A43", # heat-pump
          "\U000F0335", # lightbulb
          "\U000F0E4F", # lightbulb-off
          "\U000F1253", # lightbulb-group
          "\U000F12CD", # lightbulb-group-off
          "\U000F0769", # ceiling_light
          "\U000F0FA6", # car-seat-heater
          "\U000F1054", # outdoor-lamp 
          "\U000F1A85", # water-thermometer
          "\U000F058E", # water-percent
          "\U000F1A45", # heat-wave 
          "\U000F0E02", # thermometer-chevron-down
          "\U000F0DA1", # transfer-down
          "\U000F0E03", # thermometer-chevron-up
          "\U000F0DA3", # transfer-up
          "\U000F0F9C", # home-import-outline
          "\U000F0F9B", # home-export-outline
          "\U000F0510", # thermometer-lines
          "\U000F1402", # pump
          "\U000F013B", # chemical-weapon
          "\U000F0588", # wan
          "\U000F00DE", # brightness-5
          "\U000F05AE", # window-closed
          "\U000F05B1", # window-open
          "\U000F00D6", # briefcase
          "\U000F1658", # briefcase-off
          "\U000F141E", # dome-light
          "\U000F059F", # web
          "\U000F0A8E", # web-off
          "\U000F0599", # weather-sunny
          "\U000F0594", # weather-night
          "\U000F0F61", # moon-first-quarter
          "\U000F0F62", # moon-full
          "\U000F0F63", # moon-last-quarter
          "\U000F0F64", # moon-new
          "\U000F0F65", # moon-waning-crescent
          "\U000F0F66", # moon-waning-gibbous
          "\U000F0F67", # moon-waxing-cresecent
          "\U000F0F68", # moon-waxing-gibbous
          "\U000F059C", # weather-sunset-up
          "\U000F059B", # weather-sunset-down
          "\U000F192F", # smoke-detector-alert-outline
          "\U000F1808", # smoke-detector-outline
          "\U000F180A", # smoke-detector-off-outline
          "\U000F1930", # smoke-detector-variant-alert
          "\U000F180B", # smoke-detector-variant
          "\U000F180C", # smoke-detector-variant-off
          "\U000F0D91", # motion-sensor
          "\U000F1435", # motion-sensor-off
          "\U000F0BC9", # space-invaders
          "\U000F10CB", # alien-outline
          "\U000F081B", # door-closed
          "\U000F081C", # door-open
          "\U000F0891", # thermostat-box
          "\U000F06D9", # garage
          "\U000F0872", # garage-alert
          "\U000F06DA", # garage-open
          "\U000F058C", # water
          "\U000F058D", # water-off
          "\U000F070D", # robot-vacuum
          "\U000F1B5D", # robot-vacuum-alert
          "\U000F1C01", # robot-vacuum-off
          "\U000F0908", # robot-vacuum-variant
          "\U000F1B5E", # robot-vacuum-variant-alert
          "\U000F1C02", # robot-vacuum-variant-off
          "\U000F08F3", # nas
          "\U000F1A73", # solar-power-variant
          "\U000F1A74", # solar-power-variant-outline
          "\U000F0717", # snowflake
          "\U000F1A79", # sun-snowflake-variant
          "\U000F0238", # flame
          "\U000F035D", # menu-down
          ]

  #- file: "fonts/materialdesignicons-webfont.7.4.47.ttf"
  - file: 'https://github.com/Templarian/MaterialDesign-Webfont/raw/v7.4.47/fonts/materialdesignicons-webfont.ttf'
    id: icons_100
    size: 100
    bpp: 4
    glyphs: [
      "\U000F0594", # clear-night
      "\U000F0590", # cloudy
      "\U000F0F2F", # exceptional
      "\U000F0591", # fog
      "\U000F0592", # hail
      "\U000F0593", # lightning
      "\U000F067E", # lightning-rainy
      "\U000F0595", # day-partlycloudy
      "\U000F0F31", # night-partlycloudy
      "\U000F0596", # pouring
      "\U000F0597", # rainy
      "\U000F0598", # snowy
      "\U000F067F", # snowy-rainy
      "\U000F0599", # sunny
      "\U000F059D", # windy
      "\U000F059E", # windy-variant
      "\U000F14E4", # sunny-off
      "\U000F050F", # thermometer
      "\U000F10C3", # thermometer low
      "\U000F10C2", # thermometer high
      "\U000F192D", # grid import
      "\U000F02D1", # mdi-heart
      "\U000F05F1", # ev-station
      "\U000F140B", # lightning bolt
      "\U000F0425", # power
      "\U000F068A", # shield-home
      "\U000F02DC", # home
      "\U000F1A91", # cash-clock
      "\U000F0F55", # home-thermometer-outline
      "\U000F18D6", # sun-thermometer
      ]

### For future use ###
  # - file: "fonts/aterialdesignicons-webfont.7.4.47.ttf"
  #   id: battery_icons_56
  #   size: 56
  #   bpp: 4
  #   glyphs: [
  #     "\U000F007A", # mdi-battery-10
  #     "\U000F007B", # mdi-battery-20
  #     "\U000F007C", # mdi-battery-30
  #     "\U000F007D", # mdi-battery-40
  #     "\U000F007E", # mdi-battery-50
  #     "\U000F007F", # mdi-battery-60
  #     "\U000F0080", # mdi-battery-70
  #     "\U000F0081", # mdi-battery-80
  #     "\U000F0082", # mdi-battery-90
  #     "\U000F0079", # mdi-battery (full)
  #     "\U000F008E", # mdi-battery-outline
  #     "\U000F0091", # mdi-battery-unknown
  #     ]

### LVGL Graphics
lvgl:
  id: screen
  log_level: none #INFO
  buffer_size: 50%
  disp_bg_image: background
  color_depth: 16
  default_font: roboto_56
  bg_opa: TRANSP
  style_definitions:
    - id: date_style
      text_color: my_white
      border_color: my_gray
      radius: 0

  on_idle:
    timeout: !lambda "return (id(display_timeout).state * 1000);"
    then:
      - logger.log: "LVGL is idle"
      - light.turn_off: lcdbacklight
      #- lvgl.pause:

  theme:
    arc:
      scroll_on_focus: true
    slider:
      scroll_on_focus: true
    button:
      bg_color: 0x4D93DD
      bg_grad_dir: VER
      bg_opa: COVER
      border_color: 0x0077b3
      border_width: 2
      pressed: # set some button colors to be different in pressed state
        bg_color: 0xFFD512
      checked: # set some button colors to be different in checked state
        bg_color: 0xF53B3B
        text_color: 0xfff300
      scroll_on_focus: true
      text_font: roboto_56
      text_color: my_white
      focused:
        border_color: my_gray
    label:
      text_font: roboto_56
      text_color: my_white

  gradients:
    - id: color_bar
      direction: ver
      dither: none
      stops:
        - color: 0x4D93DD
          position: 0%
        - color: 0x4BDCE3
          position: 20%
        - color: 0xA1EDDE
          position: 40%
        - color: 0xEFF2B1
          position: 60%
        - color: 0xFFD512
          position: 80%
        - color: 0xF53B3B
          position: 100%

  pages:
    # Main page
    - id: room_page
    ## Widgets spaced in a 8x5 grid
      widgets:
        - obj: # main page object
            align: TOP_LEFT
            width: 1024
            height: 600
            pad_all: 6
            radius: 0
            # pad_top: 6
            # pad_left: 8
            bg_color: my_black
            bg_opa: 50%
            border_opa: TRANSP
            # border_color: my_green ## for testing
            # border_width: 1  ## for testing
            layout: # enable the GRID layout 
              # pad_column: 10 ## for testing
              type: GRID # split the rows and the columns
              grid_columns: [FR(80), FR(80), FR(225), FR(83), FR(83), FR(83), FR(83), FR(83),] # 8 columns divided in pixels, plan is a 2x5 columns divided in one 3x5 and one 5x5
              grid_rows: [FR(85), FR(146), FR(83), FR(83), FR(83)] # 5 rows divided in pixels
            widgets:
              # 1st Column 3x5 ## Remeber columns and rows numbering start at 0 
              - label:
                  id: homeassistant_time_text
                  pad_left: 12
                  grid_cell_row_pos: 0 # 1st row
                  grid_cell_column_pos: 0 # 1st column
                  grid_cell_column_span: 3 # column 0,1,2 span about half the screen (80+80+215)
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              - label:
                  text: "\U000F14E4" # Weather icon
                  id: lbl_weather_forecast_condition_icon
                  text_font: icons_100
                  text_align: CENTER
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 0
                  grid_cell_column_span: 2 # span first 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  on_press:
                    then:
                      lvgl.page.show: weather_page

              - label:
                  text: "Weather" 
                  id: lbl_weather_forecast_condition_name 
                  text_align: LEFT
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 2
                  grid_cell_column_span: 1  # CHANGE from 2 to 1
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label: 
                  #text: "\U000F050F" # Outdoor temperature
                  id: outdoor_temperature_text
                  text_font: roboto_32
                  text_align: LEFT
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 4
                  grid_cell_column_span: 1
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              - label:
                  text: "\U000F050F" # Indoor temperature
                  text_align: CENTER
                  pad_top: 5
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  id: indoor_temperature_text
                  text_align: LEFT
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              - label:
                  text: "\U000F058E" # Indoor Humidity
                  text_align: CENTER
                  pad_top: 5
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  id: indoor_humidity_text
                  text_align: LEFT
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              - label:
                  text: "\U000F029A" # Indoor Air Pressure
                  text_align: CENTER
                  pad_top: 5
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  id: indoor_air_pressure_text
                  text_align: LEFT
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              # 2nd Column 5x5
              - label:
                  text: "\U000F02DC" # Home icon
                  text_align: LEFT
                  pad_top: 4
                  pad_left: 40
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3 # center
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F0EC5" # remote-tv
                  text_align: LEFT
                  pad_top: 4
                  pad_right: 10
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 3 # center
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  on_press:
                    then:
                      lvgl.page.show: media_remote_page

              - label:
                  id: internet_status
                  text: "\U000F0588" # WAN icon
                  text_align: LEFT
                  pad_top: 2
                  pad_left: 20
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 4 # center
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F07E4" # Indoor CO2
                  text_align: CENTER
                  pad_top: 5
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 3 #4th column, starting in the center of the screen
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  id: indoor_co2_text
                  text_align: LEFT
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 4 #5th column 
                  grid_cell_column_span: 2 #span all the remaning columns
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              - label:
                  text: "\U000F0438" # Indoor TVOC
                  text_align: CENTER
                  pad_top: 5
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 3
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  id: indoor_tvoc_text 
                  text_align: LEFT
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 4 #5th column 
                  grid_cell_column_span: 2 #span all the remaning columns
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    
              ## Lounge lights button 
              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 4
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_outdoor_lights
                  checkable: false #true
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        align: CENTER
                        text: "\U000F1747" # uplight
                  on_click:
                   - homeassistant.action:
                       action: automation.trigger
                       data:
                         entity_id: automation.lamp_lounge

                        # brightness: "100"

              ## Overhead Light button
              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 4 #5th row, bottom row
                  grid_cell_column_pos: 5 #5th column
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: lounge_fan_light
                  checkable: false #true
                  widgets:
                    - label:
                        align: CENTER
                        text: "\U000F141E" # dome-light
                  on_click:
                    - homeassistant.service:
                        service: script.lounge_light_toggle

    
              ## Desk Lights button 
              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 6
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_office_workbench_led_strip
                  checkable: false #true
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        align: center
                        text: "\U000F1051" # led-strip-variant
                  on_click:
                    - homeassistant.action:
                        action: light.toggle
                        data:
                          entity_id: light.lounge_desk_lights
                    - homeassistant.action:
                        action: switch.toggle
                        data:                          
                          entity_id: switch.plugmulti_lounge_switch_2
                    - homeassistant.action:
                        action: switch.toggle
                        data:                          
                          entity_id: switch.plugmulti_lounge_switch_3

              ## Monitors LED Strip button 
              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 7
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_pc_led_strip
                  #checkable: false #true
                  widgets:
                    - label:
                        id: lbl_bathtub
                        align: CENTER
                        text: "\U000F12BA" # string-lights
                  on_click:
                    - homeassistant.action:
                        action: light.toggle
                        data:
                          entity_id: light.switch_usb_led_pc
    
              ## Radiator LED Strip button 
              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 7
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_lounge_radiator
                  checkable: true #true
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        align: CENTER
                        text: "\U000F07D6" # led-strip
                  on_click:
                    - homeassistant.action:
                        action: light.toggle
                        data:
                          entity_id: light.led_dimmer_lounge_radiator
    
                  ## Office Lamp button 
              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 7
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_office_lamp2
                  checkable: false #true
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        align: CENTER
                        text: "\U000F1747" # floor-lamp-torchiere
                  on_click:
                    - homeassistant.action:
                        action: light.toggle
                        data:
                          entity_id: light.ledvance_a19_rgbw_light

        - obj: ## second object up to the right
            align: TOP_RIGHT
            width: 280 ## 
            height: 200 ##  
            pad_all: 5
            radius: 0
            bg_color: my_black
            bg_opa: TRANSP # complete transparent since this is ontop of the first object
            border_opa: TRANSP
            layout: # enable the GRID layout 
              pad_column: 10
              type: GRID # split the rows and the columns into a 2x4 grid
              grid_columns: [FR(1), FR(2)] # 2 columns 
              grid_rows: [FR(1), FR(1), FR(1), FR(1)] # 4 rows equal
            widgets: 
              - label:
                  #text: "\U000F0F67" # moon-waxing-cresecent
                  text_font: roboto_28
                  id: moon_text # Moon
                  text_align: LEFT
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text_font: roboto_28
                  id: indoor_illuminance_text # Illuminance
                  text_align: LEFT
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 1
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  #text: "\U000F0599" # weather-sunny
                  text_font: roboto_28
                  id: sun_text # Sun
                  text_align: LEFT
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text_font: roboto_28
                  id: indoor_voc_bedroom_text # Particulate Matter 1.0
                  text_align: LEFT
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 1
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  #text: "\U000F1658" # briefcase-off
                  text_font: roboto_28
                  id: workday_text # Workday
                  text_align: LEFT
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text_font: roboto_28
                  id: indoor_pm25_text # Particulate Matter 2.5
                  text_align: LEFT
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 1
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  #text: "\U000F05AE" # door-closed
                  text_font: roboto_28
                  id: door_text # Door
                  text_align: LEFT
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 0
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text_font: roboto_28
                  id: indoor_ch2o_text # Particulate Matter 10
                  text_align: LEFT
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 1
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

    # Media Remote Control Page
    - id: media_remote_page
      ## Widgets spaced in a 4x3 grid
      widgets:
        - obj: # Media Remote page object
            align: TOP_LEFT
            width: 1024
            height: 800
            pad_all: 6
            radius: 0
            # pad_top: 6
            # pad_left: 8
            bg_color: my_black
            bg_opa: 50%
            border_opa: TRANSP
            # border_color: my_green ## for testing
            # border_width: 1  ## for testing
            layout: # enable the GRID layout 
              # pad_column: 10 ## for testing
              type: GRID # split the rows and the columns
              grid_columns: [FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80),] # 10 columns in pixels
              grid_rows: [FR(80), FR(64), FR(64), FR(64), FR(64), FR(64), FR(80)] # 3 rows in pixels

            widgets:
              - button:
                  id: remote_close
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 9
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F1398" # close-thick
                  on_press:
                    then:
                      lvgl.page.show: room_page

              - label:
                  id: lbl_tv_input
                  text_align: LEFT
                  text_font: roboto_46
                  #pad_top: 2
                  #pad_left: 20
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 2 # center
                  grid_cell_x_align: START
                  grid_cell_y_align: START

              - label:
                  id: lbl_receiver_input
                  text_align: LEFT
                  text_font: roboto_46
                  #pad_top: 2
                  #pad_left: 20
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 2 # center
                  grid_cell_x_align: START
                  grid_cell_y_align: START

              - label:
                  id: lbl_androidtv_app
                  text_align: LEFT
                  text_font: roboto_46
                  #pad_top: 2
                  #pad_left: 20
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 2 # center
                  grid_cell_x_align: START
                  grid_cell_y_align: START

              - label:
                  id: lbl_reciver_volume
                  text_align: RIGHT
                  text_font: roboto_46
                  #pad_top: 2
                  #pad_left: 20
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 9 # 
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - slider:
                  id: sld_reciever_volume
                  min_value: 0
                  max_value: 100
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 7 # 
                  width: 25
                  height: 260
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  on_release:
                    - homeassistant.action:
                        action: media_player.volume_set
                        data:
                          entity_id: media_player.str_dn2010
                          volume_level: !lambda return (x/100);

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 0
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  radius: 50
                  width: 100
                  height: 100
                  id: btn_volume_down
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F075E" # volume-down
                  on_click:
                    then:
                      #- homeassistant.action:
                      #    action: media_player.volume_down
                      #    data:
                      #      entity_id: media_player.str_dn2010
                    - homeassistant.action:
                        action: media_player.volume_set
                        data:
                          entity_id: media_player.str_dn2010
                          volume_level: !lambda return (id(reciever_volume_level).state - 0.02);

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 0
                  grid_cell_x_align: START
                  grid_cell_y_align: END
                  radius: 50
                  width: 100
                  height: 100
                  id: btn_volume_mute
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F075F" # volume-mute
                  on_click:
                    if:
                      condition:
                        - binary_sensor.is_on: bedroom_receiver_muted
                      then: 
                        - homeassistant.action:
                            action: media_player.volume_mute
                            data:
                              entity_id: media_player.str_dn2010
                              is_volume_muted: "false"
                      else:
                        - homeassistant.action:
                            action: media_player.volume_mute
                            data:
                              entity_id: media_player.str_dn2010
                              is_volume_muted: "true"

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 9
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  radius: 50
                  width: 100
                  height: 100
                  id: btn_volume_up
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F075D" # volume-up
                  on_click:
                    then:
                      #- homeassistant.action:
                      #    action: media_player.volume_up
                      #    data:
                      #      entity_id: media_player.str_dn2010
                    - homeassistant.action:
                        action: media_player.volume_set
                        data:
                          entity_id: media_player.str_dn2010
                          volume_level: !lambda return (id(reciever_volume_level).state + 0.02);

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 2
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_receiver
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F093D" # receiver-on
                  on_click:
                    then:
                      - homeassistant.action:
                          action: media_player.toggle
                          data:
                            entity_id: media_player.str_dn2010

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 3
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_television
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F0502" # television
                  on_click:
                    then:
                      - homeassistant.action:
                          action: media_player.toggle
                          data:
                            entity_id: media_player.samsung_un60es6100_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 4
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_androidtv
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F0032" # android
                  on_click:
                    then:
                      - homeassistant.action:
                          action: media_player.toggle
                          data:
                            entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 5
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_playstation
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F0414" # sony-playstation

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 6
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_xbox
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F05B9" # microsoft-xbox

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 7
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_mister
                  checkable: false
                  widgets:
                    - image:
                        src: mister_icon # misterfpga icon
                        align: CENTER
                  on_click:
                    - homeassistant.action:
                        action: media_player.select_source
                        data:
                          source: HDMI3
                          entity_id: media_player.samsung_un60es6100_2
                    - homeassistant.action:
                        action: media_player.turn_on
                        data:
                          entity_id: media_player.str_dn2010

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 1
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_plex
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F06BA" # plex
                  on_click:
                    - homeassistant.action:
                        action: automation.fingerbot_lounge_toggle
                        data:
                        #  media_content_type: app
                        #  media_content_id: com.plexapp.android
                          entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 2
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_youtube
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F05C3" # youtube
                  on_click:
                    - homeassistant.action:
                        action: media_player.play_media
                        data:
                          media_content_type: app
                          media_content_id: com.google.android.youtube.tv
                          entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_netflix
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F0746" # netflix
                  on_click:
                    - homeassistant.action:
                        action: media_player.play_media
                        data:
                          media_content_type: app
                          media_content_id: com.netflix.ninja
                          entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 4
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_amazon_prime
                  checkable: false
                  widgets:
                    - image:
                        src: amazon_icon
                        align: CENTER
                  on_click:
                    - homeassistant.action:
                        action: media_player.play_media
                        data:
                          media_content_type: app
                          media_content_id: com.amazon.amazonvideo.livingroom
                          entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 5
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_steam
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F04D3" # steam
                  on_click:
                    - homeassistant.action:
                        action: media_player.play_media
                        data:
                          media_content_type: app
                          media_content_id: com.valvesoftware.steamlink
                          entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 6
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_retroarch
                  checkable: false
                  widgets:
                    - image:
                        src: retroarch_icon
                        align: CENTER
                  on_click:
                    - homeassistant.action:
                        action: media_player.play_media
                        data:
                          media_content_type: app
                          media_content_id: com.retroarch.aarch64
                          entity_id: media_player.bedroomshieldtv_2

              - button:
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 7
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  id: btn_media_tinycam
                  checkable: false
                  widgets:
                    - label:
                        # id: lbl_xxxxxxx
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F07AE" # cctv
                  on_click:
                    - homeassistant.action:
                        action: media_player.play_media
                        data:
                          media_content_type: app
                          media_content_id: com.alexvas.dvr.pro
                          entity_id: media_player.bedroomshieldtv_2

        # Weather Page
    - id: weather_page
      widgets:
        - obj:
            align: TOP_LEFT
            width: 1024
            height: 800
            pad_all: 6
            radius: 0
            bg_color: my_black
            bg_opa: 50%
            border_opa: TRANSP
            layout:
              type: GRID
              grid_columns: [FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80), FR(80)]
              grid_rows: [FR(80), FR(64), FR(64), FR(64), FR(64), FR(64), FR(80)]
            widgets:
              - button:
                  id: weather_close
                  text_align: CENTER
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 9
                  grid_cell_x_align: STRETCH
                  grid_cell_y_align: STRETCH
                  checkable: false
                  widgets:
                    - label:
                        text_font: roboto_46
                        align: CENTER
                        text: "\U000F1398" # close-thick
                  on_press:
                   then:
                     lvgl.page.show: room_page
          # tileview deleted - page now only has close button

  top_layer:
    widgets:
    # make sure it's the last one in this list:
    - obj:
        id: boot_screen
        x: 0
        y: 0
        width: 100%
        height: 100%
        bg_color: 0xffffff
        bg_opa: COVER
        radius: 0
        pad_all: 0
        border_width: 0
        widgets:
          - image:
              align: CENTER
              src: boot_logo
              y: -40
          - spinner:
              align: CENTER
              y: 95
              height: 64
              width: 64
              spin_time: 1s
              arc_length: 60deg
              arc_width: 10
              indicator:
                arc_color: 0x18bcf2
                arc_width: 10
        on_press:
          - lvgl.widget.hide: boot_screen
